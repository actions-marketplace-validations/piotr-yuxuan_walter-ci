<html>
 <head>
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <link rel="stylesheet" href="../../coverage.css"/>  <title> piotr_yuxuan/walter_ci/secrets.clj </title>
 </head>
 <body>
<span class="covered" title="1 out of 1 forms covered">
                001&nbsp;&nbsp;(ns&nbsp;piotr-yuxuan.walter-ci.secrets
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                002&nbsp;&nbsp;&nbsp;&nbsp;(:require&nbsp;[byte-streams&nbsp;:as&nbsp;byte-streams]
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                003&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[caesium.crypto.box&nbsp;:as&nbsp;crypto]
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                004&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[clj-http.client&nbsp;:as&nbsp;http]
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                005&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[clojure.string&nbsp;:as&nbsp;str]
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                006&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[jsonista.core&nbsp;:as&nbsp;json]
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                007&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[leiningen.change]
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                008&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[safely.core&nbsp;:refer&nbsp;[safely]])
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                009&nbsp;&nbsp;&nbsp;&nbsp;(:import&nbsp;(java.util&nbsp;Base64)))
                </span><br/>
<span class="blank" title="0 out of 0 forms covered">
                010&nbsp;&nbsp;
                </span><br/>
<span class="covered" title="1 out of 1 forms covered">
                011&nbsp;&nbsp;(defn&nbsp;repository-public-key
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                012&nbsp;&nbsp;&nbsp;&nbsp;[{:keys&nbsp;[github-repository&nbsp;github-api-url&nbsp;github-actor&nbsp;walter-github-password]}]
                </span><br/>
<span class="not-covered" title="0 out of 10 forms covered">
                013&nbsp;&nbsp;&nbsp;&nbsp;(let&nbsp;[response&nbsp;(safely
                </span><br/>
<span class="not-covered" title="0 out of 2 forms covered">
                014&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(http&#x2F;request
                </span><br/>
<span class="not-covered" title="0 out of 6 forms covered">
                015&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{:request-method&nbsp;:get
                </span><br/>
<span class="not-covered" title="0 out of 8 forms covered">
                016&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:url&nbsp;(str&#x2F;join&nbsp;&quot;&#x2F;&quot;&nbsp;[github-api-url&nbsp;&quot;repos&quot;&nbsp;github-repository&nbsp;&quot;actions&#x2F;secrets&#x2F;public-key&quot;])
                </span><br/>
<span class="not-covered" title="0 out of 3 forms covered">
                017&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:basic-auth&nbsp;[github-actor&nbsp;walter-github-password]
                </span><br/>
<span class="not-covered" title="0 out of 5 forms covered">
                018&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:headers&nbsp;{&quot;Content-Type&quot;&nbsp;&quot;application&#x2F;json&quot;
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                019&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;Accept&quot;&nbsp;&quot;application&#x2F;vnd.github.v3+json&quot;}})
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                020&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:on-error
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                021&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:max-retries&nbsp;5)
                </span><br/>
<span class="not-covered" title="0 out of 4 forms covered">
                022&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;payload&nbsp;(-&gt;&gt;&nbsp;response
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                023&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:body
                </span><br/>
<span class="not-covered" title="0 out of 1 forms covered">
                024&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;json&#x2F;read-value)
                </span><br/>
<span class="not-covered" title="0 out of 3 forms covered">
                025&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;^String&nbsp;encoded-key&nbsp;(get&nbsp;payload&nbsp;&quot;key&quot;)]
                </span><br/>
<span class="not-covered" title="0 out of 5 forms covered">
                026&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{:encoded-key&nbsp;encoded-key
                </span><br/>
<span class="not-covered" title="0 out of 3 forms covered">
                027&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:decoded-key&nbsp;(.decode&nbsp;(Base64&#x2F;getDecoder)&nbsp;(.getBytes&nbsp;encoded-key))
                </span><br/>
<span class="not-covered" title="0 out of 3 forms covered">
                028&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:key-id&nbsp;(get&nbsp;payload&nbsp;&quot;key_id&quot;)}))
                </span><br/>
<span class="blank" title="0 out of 0 forms covered">
                029&nbsp;&nbsp;
                </span><br/>
<span class="covered" title="1 out of 1 forms covered">
                030&nbsp;&nbsp;(defn&nbsp;public-key-sealed-box
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                031&nbsp;&nbsp;&nbsp;&nbsp;[{:keys&nbsp;[^String&nbsp;decoded-key&nbsp;key-id]}&nbsp;^String&nbsp;secret-value]
                </span><br/>
<span class="not-covered" title="0 out of 7 forms covered">
                032&nbsp;&nbsp;&nbsp;&nbsp;{:encrypted_value&nbsp;(-&gt;&gt;&nbsp;(byte-streams&#x2F;to-byte-array&nbsp;secret-value)
                </span><br/>
<span class="not-covered" title="0 out of 3 forms covered">
                033&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(crypto&#x2F;anonymous-encrypt&nbsp;decoded-key)
                </span><br/>
<span class="not-covered" title="0 out of 1 forms covered">
                034&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(.encodeToString&nbsp;(Base64&#x2F;getEncoder)))
                </span><br/>
<span class="not-covered" title="0 out of 1 forms covered">
                035&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:key_id&nbsp;key-id})
                </span><br/>
<span class="blank" title="0 out of 0 forms covered">
                036&nbsp;&nbsp;
                </span><br/>
<span class="covered" title="1 out of 1 forms covered">
                037&nbsp;&nbsp;(defn&nbsp;upsert-value
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                038&nbsp;&nbsp;&nbsp;&nbsp;[{:keys&nbsp;[github-repository&nbsp;github-api-url&nbsp;github-actor&nbsp;walter-github-password]&nbsp;:as&nbsp;config}&nbsp;^String&nbsp;secret-name&nbsp;^String&nbsp;secret-value]
                </span><br/>
<span class="not-covered" title="0 out of 4 forms covered">
                039&nbsp;&nbsp;&nbsp;&nbsp;(let&nbsp;[public-key&nbsp;(repository-public-key&nbsp;config)
                </span><br/>
<span class="not-covered" title="0 out of 4 forms covered">
                040&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sealed-box&nbsp;(public-key-sealed-box&nbsp;public-key&nbsp;secret-value)]
                </span><br/>
<span class="not-covered" title="0 out of 9 forms covered">
                041&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(safely
                </span><br/>
<span class="not-covered" title="0 out of 2 forms covered">
                042&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(http&#x2F;request
                </span><br/>
<span class="not-covered" title="0 out of 7 forms covered">
                043&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{:request-method&nbsp;:put
                </span><br/>
<span class="not-covered" title="0 out of 10 forms covered">
                044&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:url&nbsp;(str&#x2F;join&nbsp;&quot;&#x2F;&quot;&nbsp;[github-api-url&nbsp;&quot;repos&quot;&nbsp;github-repository&nbsp;&quot;actions&quot;&nbsp;&quot;secrets&quot;&nbsp;secret-name])
                </span><br/>
<span class="not-covered" title="0 out of 3 forms covered">
                045&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:body&nbsp;(json&#x2F;write-value-as-string&nbsp;sealed-box)
                </span><br/>
<span class="not-covered" title="0 out of 3 forms covered">
                046&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:basic-auth&nbsp;[github-actor&nbsp;walter-github-password]
                </span><br/>
<span class="not-covered" title="0 out of 5 forms covered">
                047&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:headers&nbsp;{&quot;Content-Type&quot;&nbsp;&quot;application&#x2F;json&quot;
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                048&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;Accept&quot;&nbsp;&quot;application&#x2F;vnd.github.v3+json&quot;}})
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                049&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:on-error
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                050&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:max-retries&nbsp;5)))
                </span><br/>
 </body>
</html>
